<!--
  Copyright (c) Wiesław Šoltés. All rights reserved.
  Licensed under the MIT license. See LICENSE file in the project root for details.
-->
<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:viewModels="clr-namespace:DataGridSample.ViewModels"
             x:Class="DataGridSample.Pages.SummariesGroupedPage"
             x:DataType="viewModels:SummariesGroupedViewModel"
             mc:Ignorable="d"
             d:DesignWidth="800" d:DesignHeight="600">
  
  <UserControl.DataContext>
    <viewModels:SummariesGroupedViewModel />
  </UserControl.DataContext>
  
  <Grid Margin="12" RowDefinitions="Auto,*">
    <StackPanel Spacing="4" Margin="0,0,0,8">
      <TextBlock Text="Column Summaries - Grouped Data" FontWeight="Bold" FontSize="18" />
      <TextBlock TextWrapping="Wrap">
        This sample demonstrates column summaries with grouped data. Each group shows its own
        summary values (using Scope="Group"), and the grid total is also displayed at the bottom
        (using Scope="Both" for summaries that appear in both places).
      </TextBlock>
    </StackPanel>

    <DataGrid Grid.Row="1"
              ItemsSource="{Binding GroupedView}"
              AutoGenerateColumns="False"
              IsReadOnly="True"
              CanUserResizeColumns="True"
              CanUserReorderColumns="True"
              CanUserSortColumns="True"
              GridLinesVisibility="All"
              ShowTotalSummary="True"
              ShowGroupSummary="True"
              TotalSummaryPosition="Bottom"
              GroupSummaryPosition="Footer">
      <DataGrid.Columns>
        <DataGridTextColumn Header="Order ID" 
                            Binding="{Binding OrderId}" 
                            Width="120"
                            x:DataType="viewModels:SampleOrder">
          <DataGridTextColumn.Summaries>
            <DataGridAggregateSummaryDescription Aggregate="Count" Scope="Both" Title="Count: " />
          </DataGridTextColumn.Summaries>
        </DataGridTextColumn>
        
        <DataGridTextColumn Header="Customer" 
                            Binding="{Binding Customer}" 
                            Width="*"
                            x:DataType="viewModels:SampleOrder">
          <DataGridTextColumn.Summaries>
            <DataGridAggregateSummaryDescription Aggregate="CountDistinct" Scope="Both" Title="Unique: " />
          </DataGridTextColumn.Summaries>
        </DataGridTextColumn>
        
        <DataGridTextColumn Header="Product" 
                            Binding="{Binding Product}" 
                            Width="*"
                            x:DataType="viewModels:SampleOrder" />
        
        <DataGridTextColumn Header="Region" 
                            Binding="{Binding Region}" 
                            Width="80"
                            x:DataType="viewModels:SampleOrder" />
        
        <DataGridTextColumn Header="Quantity" 
                            Binding="{Binding Quantity}" 
                            Width="80"
                            x:DataType="viewModels:SampleOrder">
          <DataGridTextColumn.Summaries>
            <DataGridAggregateSummaryDescription Aggregate="Sum" Scope="Both" StringFormat="N0" Title="Sum: " />
          </DataGridTextColumn.Summaries>
        </DataGridTextColumn>
        
        <DataGridTextColumn Header="Unit Price" 
                            Binding="{Binding UnitPrice, StringFormat={}{0:C2}}" 
                            Width="100"
                            x:DataType="viewModels:SampleOrder">
          <DataGridTextColumn.Summaries>
            <DataGridAggregateSummaryDescription Aggregate="Average" Scope="Both" StringFormat="C2" Title="Avg: " />
          </DataGridTextColumn.Summaries>
        </DataGridTextColumn>
        
        <DataGridTextColumn Header="Total" 
                            Binding="{Binding Total, StringFormat={}{0:C2}}" 
                            Width="120"
                            x:DataType="viewModels:SampleOrder">
          <DataGridTextColumn.Summaries>
            <DataGridAggregateSummaryDescription Aggregate="Sum" Scope="Both" StringFormat="C2" Title="Total: " />
          </DataGridTextColumn.Summaries>
        </DataGridTextColumn>
      </DataGrid.Columns>
    </DataGrid>
  </Grid>
</UserControl>
