<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:viewModels="clr-namespace:DataGridSample.ViewModels"
             x:Class="DataGridSample.Pages.MailboxMimicPage"
             x:DataType="viewModels:MailboxMimicViewModel">
  <UserControl.DataContext>
    <viewModels:MailboxMimicViewModel />
  </UserControl.DataContext>

  <Grid Margin="12"
        RowDefinitions="Auto,Auto,*"
        RowSpacing="8">
    <StackPanel Spacing="4">
      <TextBlock Text="Mailbox-style list"
                 FontWeight="Bold"
                 FontSize="18" />
      <TextBlock TextWrapping="Wrap"
                 Text="A single templated column shows sender, subject, preview, unread state, and flagging." />
    </StackPanel>

    <TextBlock Grid.Row="1"
               Text="{Binding Summary}"
               Opacity="0.7" />

    <DataGrid Grid.Row="2"
              ItemsSource="{Binding Items}"
              AutoGenerateColumns="False"
              HeadersVisibility="None"
              GridLinesVisibility="None"
              SelectionMode="Single"
              IsReadOnly="False"
              UseLogicalScrollable="True"
              CanUserSortColumns="False"
              CanUserResizeColumns="False"
              CanUserReorderColumns="False"
              RowHeight="72">
      <DataGrid.Columns>
        <DataGridTemplateColumn Width="*"
                                x:DataType="viewModels:MailboxMimicViewModel+MailItem">
          <DataGridTemplateColumn.CellTemplate>
            <DataTemplate x:DataType="viewModels:MailboxMimicViewModel+MailItem">
              <Border Padding="10,6">
                <Grid ColumnDefinitions="Auto,*,Auto"
                      RowDefinitions="Auto,Auto">
                  <TextBlock Grid.RowSpan="2"
                             Text="NEW"
                             Margin="0,2,8,0"
                             FontSize="10"
                             Opacity="0.7"
                             IsVisible="{Binding IsUnread}" />

                  <TextBlock Grid.Column="1"
                             Text="{Binding Sender}"
                             FontWeight="Bold"
                             TextTrimming="CharacterEllipsis" />

                  <TextBlock Grid.Column="2"
                             Text="{Binding Received, StringFormat='{}{0:MMM d}'}"
                             Opacity="0.7"
                             FontSize="11"
                             HorizontalAlignment="Right" />

                  <StackPanel Grid.Column="1"
                              Grid.Row="1"
                              Spacing="2">
                    <TextBlock Text="{Binding Subject}"
                               FontWeight="Bold"
                               TextTrimming="CharacterEllipsis" />
                    <TextBlock Text="{Binding Preview}"
                               Opacity="0.7"
                               TextTrimming="CharacterEllipsis" />
                  </StackPanel>

                  <StackPanel Grid.Column="2"
                              Grid.Row="1"
                              Spacing="4"
                              HorizontalAlignment="Right">
                    <TextBlock Text="ATT"
                               FontSize="10"
                               Opacity="0.6"
                               HorizontalAlignment="Right"
                               IsVisible="{Binding HasAttachment}" />
                    <ToggleButton IsChecked="{Binding IsFlagged}"
                                  Content="F"
                                  Width="24"
                                  Height="22"
                                  Padding="0"
                                  FontSize="11"
                                  HorizontalContentAlignment="Center"
                                  VerticalContentAlignment="Center"
                                  HorizontalAlignment="Right" />
                  </StackPanel>
                </Grid>
              </Border>
            </DataTemplate>
          </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
      </DataGrid.Columns>
    </DataGrid>
  </Grid>
</UserControl>
